---
import MainLayout from '../layouts/MainLayout.astro';

// Artwork data
interface Artwork {
  id: string;
  title: string;
  artist: string;
  description: string;
  image: string;
  size: string;
  medium: string;
  year?: string;
}

const artworks: Artwork[] = [
  {
    id: 'to-the-finish-line',
    title: 'To the Finish Line',
    artist: 'Sarah J. Schwartz',
    description: `sometimes we run and run and get 'there' and forget that it's not really about the end result, but how it felt *while* getting 'there.' that's honestly why I love creating and painting for myself because the journey is completely up to me—I can start, stop, pause, and finish whenever I feel like and really listen to what my brain and heart are saying. now, my challenge is how to apply that to every other aspect of my life…`,
    image: '/images/art-collection/img-art-to-the-finish-line.webp',
    size: '18" x 24"',
    medium: 'Acrylic and oil pastel on canvas, frame included',
  }
];

const pageDescription = "A curated collection of artwork that inspires and moves me.";
---

<MainLayout title="Art Collection | David Hoang" description={pageDescription}>
  <div class="art-collection-page">
    <header class="art-collection-header">
      <h1>Art Collection</h1>
      <p class="art-collection-intro">A curated collection of artwork that inspires and moves me.</p>
    </header>

    <div class="art-split-view">
      <!-- Left: Thumbnail list -->
      <aside class="art-thumbnail-list" role="list" aria-label="Artwork thumbnails">
        {artworks.map((artwork, index) => (
          <button
            class={`art-thumbnail-item ${index === 0 ? 'active' : ''}`}
            data-artwork-id={artwork.id}
            aria-label={`View ${artwork.title} by ${artwork.artist}`}
            role="listitem"
          >
            <img
              src={artwork.image}
              alt={`${artwork.title} by ${artwork.artist}`}
              loading="lazy"
              decoding="async"
            />
            <div class="art-thumbnail-info">
              <span class="art-thumbnail-title">{artwork.title}</span>
              <span class="art-thumbnail-artist">{artwork.artist}</span>
            </div>
          </button>
        ))}
      </aside>

      <!-- Right: Detail panel -->
      <main class="art-detail-panel" id="art-detail-panel">
        <div class="art-detail-image-wrapper">
          <img
            id="detail-image"
            src={artworks[0].image}
            alt={`${artworks[0].title} by ${artworks[0].artist}`}
            class="art-detail-image"
          />
        </div>
        <div class="art-detail-content">
          <h2 class="art-detail-title" id="detail-title">{artworks[0].title}</h2>
          <p class="art-detail-artist" id="detail-artist">{artworks[0].artist}</p>
          <p class="art-detail-description" id="detail-description">{artworks[0].description}</p>
          <div class="art-detail-meta">
            <div class="art-detail-meta-item">
              <span class="art-detail-label">Size</span>
              <span class="art-detail-value" id="detail-size">{artworks[0].size}</span>
            </div>
            <div class="art-detail-meta-item">
              <span class="art-detail-label">Medium</span>
              <span class="art-detail-value" id="detail-medium">{artworks[0].medium}</span>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <style>
    .art-collection-page {
      width: 100%;
      max-width: 1400px;
      margin: 0 auto;
      padding: var(--spacing-xl) var(--spacing-lg);
    }

    .art-collection-header {
      margin-bottom: var(--spacing-2xl);
      text-align: center;
    }

    .art-collection-header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: var(--spacing-md);
      color: var(--color-text);
    }

    .art-collection-intro {
      font-size: 1.25rem;
      color: var(--color-muted);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Split View Layout */
    .art-split-view {
      display: grid;
      grid-template-columns: 320px 1fr;
      gap: var(--spacing-xl);
      min-height: calc(100vh - 300px);
    }

    /* Left: Thumbnail List */
    .art-thumbnail-list {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-md);
      overflow-y: auto;
      max-height: calc(100vh - 250px);
      padding-right: var(--spacing-sm);
      position: sticky;
      top: var(--spacing-xl);
    }

    .art-thumbnail-list::-webkit-scrollbar {
      width: 6px;
    }

    .art-thumbnail-list::-webkit-scrollbar-track {
      background: transparent;
    }

    .art-thumbnail-list::-webkit-scrollbar-thumb {
      background: var(--color-border);
      border-radius: 3px;
    }

    .art-thumbnail-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      padding: var(--spacing-sm);
      background: transparent;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
    }

    .art-thumbnail-item:hover {
      border-color: var(--color-link);
      background: var(--color-sidebar-bg);
      transform: translateX(4px);
    }

    .art-thumbnail-item.active {
      border-color: var(--color-link);
      background: var(--color-sidebar-bg);
    }

    .art-thumbnail-item img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: var(--radius-sm);
      flex-shrink: 0;
    }

    .art-thumbnail-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .art-thumbnail-title {
      font-weight: 600;
      font-size: 0.9rem;
      color: var(--color-text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .art-thumbnail-artist {
      font-size: 0.8rem;
      color: var(--color-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Right: Detail Panel */
    .art-detail-panel {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-xl);
    }

    .art-detail-image-wrapper {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    .art-detail-image {
      max-width: 100%;
      max-height: 60vh;
      width: auto;
      height: auto;
      object-fit: contain;
      border-radius: var(--radius-md);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    [data-theme="dark"] .art-detail-image {
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .art-detail-content {
      max-width: 700px;
    }

    .art-detail-title {
      font-size: 2.5rem;
      font-weight: 700;
      margin: 0 0 var(--spacing-sm) 0;
      color: var(--color-text);
    }

    .art-detail-artist {
      font-size: 1.25rem;
      color: var(--color-muted);
      margin: 0 0 var(--spacing-lg) 0;
      font-weight: 500;
    }

    .art-detail-description {
      font-size: 1.125rem;
      line-height: 1.8;
      color: var(--color-text);
      margin: 0 0 var(--spacing-xl) 0;
      white-space: pre-line;
    }

    .art-detail-meta {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-lg);
      padding-top: var(--spacing-lg);
      border-top: 1px solid var(--color-border);
    }

    .art-detail-meta-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .art-detail-label {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .art-detail-value {
      font-size: 1rem;
      color: var(--color-text);
    }

    /* Responsive Design */
    @media (max-width: 900px) {
      .art-split-view {
        grid-template-columns: 1fr;
        gap: var(--spacing-lg);
      }

      .art-thumbnail-list {
        flex-direction: row;
        overflow-x: auto;
        overflow-y: hidden;
        max-height: none;
        position: static;
        padding-right: 0;
        padding-bottom: var(--spacing-sm);
      }

      .art-thumbnail-item {
        flex-shrink: 0;
        width: 200px;
      }
    }

    @media (max-width: 768px) {
      .art-collection-page {
        padding: var(--spacing-lg) var(--spacing-md);
      }

      .art-collection-header h1 {
        font-size: 2rem;
      }

      .art-collection-intro {
        font-size: 1.1rem;
      }

      .art-detail-title {
        font-size: 1.75rem;
      }

      .art-detail-artist {
        font-size: 1.1rem;
      }

      .art-detail-description {
        font-size: 1rem;
      }
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .art-thumbnail-item {
        transition: none;
      }
    }
  </style>

  <script>
    // Split view functionality
    const thumbnailButtons = document.querySelectorAll('.art-thumbnail-item') as NodeListOf<HTMLElement>;
    const detailImage = document.getElementById('detail-image') as HTMLImageElement;
    const detailTitle = document.getElementById('detail-title') as HTMLElement;
    const detailArtist = document.getElementById('detail-artist') as HTMLElement;
    const detailDescription = document.getElementById('detail-description') as HTMLElement;
    const detailSize = document.getElementById('detail-size') as HTMLElement;
    const detailMedium = document.getElementById('detail-medium') as HTMLElement;

    const artworks = [
      {
        id: 'to-the-finish-line',
        title: 'To the Finish Line',
        artist: 'Sarah J. Schwartz',
        description: `sometimes we run and run and get 'there' and forget that it's not really about the end result, but how it felt *while* getting 'there.' that's honestly why I love creating and painting for myself because the journey is completely up to me—I can start, stop, pause, and finish whenever I feel like and really listen to what my brain and heart are saying. now, my challenge is how to apply that to every other aspect of my life…`,
        image: '/images/art-collection/img-art-to-the-finish-line.webp',
        size: '18" x 24"',
        medium: 'Acrylic and oil pastel on canvas, frame included',
      }
    ];

    function selectArtwork(artworkId: string) {
      const artwork = artworks.find(a => a.id === artworkId);
      if (!artwork) return;

      // Update detail panel
      detailImage.src = artwork.image;
      detailImage.alt = `${artwork.title} by ${artwork.artist}`;
      detailTitle.textContent = artwork.title;
      detailArtist.textContent = artwork.artist;
      detailDescription.textContent = artwork.description;
      detailSize.textContent = artwork.size;
      detailMedium.textContent = artwork.medium;

      // Update active state on thumbnails
      thumbnailButtons.forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-artwork-id') === artworkId);
      });
    }

    // Event listeners
    thumbnailButtons.forEach(thumbnail => {
      thumbnail.addEventListener('click', () => {
        const artworkId = thumbnail.getAttribute('data-artwork-id');
        if (artworkId) {
          selectArtwork(artworkId);
        }
      });
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      const activeElement = document.activeElement;
      if (!activeElement?.classList.contains('art-thumbnail-item')) return;

      const currentIndex = Array.from(thumbnailButtons).indexOf(activeElement as HTMLElement);
      let nextIndex = currentIndex;

      if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
        e.preventDefault();
        nextIndex = (currentIndex + 1) % thumbnailButtons.length;
      } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
        e.preventDefault();
        nextIndex = (currentIndex - 1 + thumbnailButtons.length) % thumbnailButtons.length;
      }

      if (nextIndex !== currentIndex) {
        thumbnailButtons[nextIndex].focus();
        const artworkId = thumbnailButtons[nextIndex].getAttribute('data-artwork-id');
        if (artworkId) selectArtwork(artworkId);
      }
    });
  </script>
</MainLayout>

