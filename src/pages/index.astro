---
import MainLayout from '../layouts/MainLayout.astro';
import SubstackSignup from '../components/SubstackSignup.astro';
import CardStackHero from '../components/CardStackHero';
import { AnimatedPhilosophyGrid, AnimatedPortfolioGrid, AnimatedSection } from '../components/AnimatedSections';
import CardStackHeroLazy from '../components/CardStackHeroLazy';

// Page metadata
const pageDescription = "David Hoang is a designer, investor, and builder focused on tools that revolutionize the internet. VP and Head of Design, AI at Atlassian. Previously at Replit, Webflow, and One Medical.";
const ogImage = "/images/img-dh-web-light.webp";

// Philosophy items data
const philosophyItems = [
  { content: '<strong>Seek paradigm shifts.</strong> Imagine the future and build it now. Those who can spot trends of shifts will have enduring success.' },
  { content: '<strong>Embrace the entrepreneurial spirit.</strong> Act like the owner of everything you do.', id: 'e3d275' },
  { content: '<strong>Software is beautiful.</strong> Making high quality software is a calling and privilege to do so.' },
  { content: '<strong>Method makes magic.</strong> Design is not magic. It\'s a methodâ€”a rigorous process of exploration, iteration, and validation until you reach a result that feels magical.', id: '647f3a' },
  { content: '<strong>Iteration over perfectionism.</strong> The number one way to be more productive is to reduce the iteration cycle.' },
];

// Portfolio items data
const portfolioItems = [
  {
    text: 'September 2024: Keynote talk at Hatch Conference: Design & (Blank)',
    link: 'https://www.youtube.com/watch?v=4lWYcr53kyI',
    linkText: 'Keynote talk at Hatch Conference: Design & (Blank)',
    image: '/images/highlights/img-highlights-hatch-conference.webp',
    imageAlt: 'David Hoang speaking at Hatch Conference 2024, presenting on stage',
  },
  {
    text: 'April 2024: Replit Developer Day and rebrand.',
    link: 'https://www.youtube.com/watch?v=T6R9nx89bY4',
    linkText: 'Replit Developer Day',
    image: '/images/highlights/img-highlights-replit.webp',
    imageAlt: 'Replit Developer Day 2024 event branding and visual identity',
  },
  {
    text: 'April 2023: Joined Play as Advisor.',
    link: 'https://createwithplay.com',
    linkText: 'Play',
    image: '/images/highlights/img-highlights-play.webp',
    imageAlt: 'Play app interface and branding design',
  },
  {
    text: 'December 2019: Launched Proof of Concept, a newsletter about design, technology, and entrepreneurship.',
    link: 'https://www.proofofconcept.pub',
    linkText: 'Proof of Concept',
    image: '/images/highlights/img-highlights-proof-of-concept.webp',
    imageAlt: 'Proof of Concept newsletter branding and design layout',
  },
];
---

<MainLayout title="David Hoang" description={pageDescription} ogImage={ogImage}>
  <!-- Card Stack Hero -->
  <section class="card-stack-section" aria-label="Current activities and projects">
    <CardStackHeroLazy client:idle />
  </section>
  <section class="design-philosophy" aria-labelledby="philosophy-heading">
    <h2 id="philosophy-heading" style="background: none;">Design philosophy</h2>
    <AnimatedPhilosophyGrid items={philosophyItems} client:visible />
  </section>
  <!-- Portfolio Section -->
  <section class="portfolio-section" aria-labelledby="highlights-heading">
    <h2 id="highlights-heading">Highlights</h2>
    <AnimatedPortfolioGrid items={portfolioItems} client:visible />
  </section>

  <!-- Newsletter Signup Section -->
  <section class="newsletter-section" aria-labelledby="newsletter-heading">
    <SubstackSignup />
  </section>

  <style>
    /* Override shader container styles for home page */
    :global([data-shader="waves"] .container),
    :global([data-shader="mesh-gradient"] .container),
    :global([data-shader="swirl"] .container),
    :global([data-shader="perlin"] .container),
    :global([data-shader="simplex"] .container),
    :global([data-shader="neuro"] .container),
    :global([data-shader] .container) {
      background: transparent !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      /* Preserve top padding for nav clearance, zero out sides and bottom */
      padding-left: 0 !important;
      padding-right: 0 !important;
      padding-bottom: 0 !important;
    }

    /* Card Stack Section */
    .card-stack-section {
      width: 100%;
      margin-top: 40px;
      background: none;
      position: relative;
      z-index: 2;
      overflow: visible;
    }

    /* Section Headings - smaller than hero H1 */
    .design-philosophy h2,
    .portfolio-section h2 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
    }

    /* Design Philosophy Section */
    .design-philosophy {
      border-top: 1px solid var(--color-border);
      padding-top: 24px;
      position: relative;
      z-index: 1;
    }

    :global(.philosophy-grid) {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      row-gap: 1.25rem;
      column-gap: 4rem;
      padding-right: 24px;
      align-items: start;
    }

    :global(.philosophy-item p) {
      margin: 0;
    }

    :global(.philosophy-item) {
      border-radius: 8px;
    }

    :global(.philosophy-item h3) {
      margin-top: 0;
      font-size: 1.25rem;
      margin-bottom: 0.75rem;
    }

    /* Portfolio Section */
    .portfolio-section {
      margin: 4rem 0;
      border-top: 1px solid var(--color-border);
      padding-top: 24px;
      content-visibility: auto;
      contain-intrinsic-size: 800px 1000px;
    }

    :global(.portfolio-grid) {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      row-gap: 1.5rem;
      column-gap: 3rem;
    }

    :global(.portfolio-content) {
      display: flex;
      flex-direction: column;
    }

    :global(.portfolio-item-text p) {
      margin: 0 0 var(--spacing-sm, 0.5rem) 0;
      font-size: 1rem;
      line-height: 1.5;
    }

    :global(.portfolio-content a) {
      font-weight: 500;
      color: var(--color-link);
    }

    :global(.portfolio-images) {
      width: 100%;
      overflow: hidden;
    }

    :global(.portfolio-images img) {
      width: 100%;
      height: auto;
      aspect-ratio: 16 / 10;
      object-fit: cover;
      border-radius: var(--radius-md, 8px);
    }

    /* Newsletter Section */
    .newsletter-section {
      display: flex;
      justify-content: center;
      padding: var(--spacing-xl) var(--container-padding);
      width: 100%;
      max-width: 100%;
    }

    .newsletter-section :global(.substack-signup) {
      width: 100%;
      max-width: 600px;
      margin: 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .design-philosophy h2,
      .portfolio-section h2 {
        font-size: 1.5rem;
      }

      .card-stack-section {
        margin-top: 50px;
      }

      /* Add horizontal padding to sections on mobile for shader themes */
      .design-philosophy,
      .portfolio-section {
        padding-left: var(--container-padding, 1rem);
        padding-right: var(--container-padding, 1rem);
      }

      :global(.philosophy-grid) {
        grid-template-columns: 1fr;
        padding-right: 0;
      }

      :global(.portfolio-grid) {
        grid-template-columns: 1fr;
        gap: var(--spacing-xl, 2rem);
      }

      .portfolio-images img {
        aspect-ratio: 16 / 6;
      }

      .newsletter-section {
        padding: var(--spacing-lg) var(--spacing-md);
      }
    }

    /* Extra-large screen optimization */
    @media (min-width: 1920px) {
      :global(.philosophy-grid) {
        grid-template-columns: repeat(2, 1fr);
        row-gap: 1.5rem;
        column-gap: 10rem; /* Increased separation for very wide displays */
      }
      
      :global(.philosophy-item p) {
        max-width: 65ch; /* Optimal character width for readability in 2-col layout */
        font-size: 1.4rem;
        line-height: 1.6;
      }

      :global(.portfolio-grid) {
        gap: 4rem;
      }
    }
  </style>
</MainLayout>